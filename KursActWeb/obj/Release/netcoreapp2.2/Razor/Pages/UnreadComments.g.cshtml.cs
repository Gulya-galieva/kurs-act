#pragma checksum "D:\Repos\kurs-act-master\KursActWeb\Pages\UnreadComments.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "ee8ad5c4ab6a581a9f42fe13ada5ef5f404a7757"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Pages_UnreadComments), @"mvc.1.0.razor-page", @"/Pages/UnreadComments.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.RazorPageAttribute(@"/Pages/UnreadComments.cshtml", typeof(AspNetCore.Pages_UnreadComments), null)]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"ee8ad5c4ab6a581a9f42fe13ada5ef5f404a7757", @"/Pages/UnreadComments.cshtml")]
    public class Pages_UnreadComments : global::Microsoft.AspNetCore.Mvc.RazorPages.Page
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#line 3 "D:\Repos\kurs-act-master\KursActWeb\Pages\UnreadComments.cshtml"
  
    ViewData["Title"] = "Непрочитанные комментарии";
    Layout = "~/Views/Shared/_Layout.cshtml";

#line default
#line hidden
            BeginContext(154, 135, true);
            WriteLiteral("\n<div class=\"panel pageAction--panel d-flex align-content-start flex-wrap\">\n    <h4 class=\"active mt-1\">Непрочитанные комментарии</h4>\n");
            EndContext();
#line 10 "D:\Repos\kurs-act-master\KursActWeb\Pages\UnreadComments.cshtml"
     if (Model.Comments.Any())
    {

#line default
#line hidden
            BeginContext(326, 194, true);
            WriteLiteral("        <a href=\"javascript:void(0)\" onclick=\"MarkAsReadAll()\" class=\"btn btn-outline-warning btn-rounded mt-0 ml-auto\" id=\"btn_mark_read\">\n            Отметить все как прочитанное\n        </a>\n");
            EndContext();
#line 15 "D:\Repos\kurs-act-master\KursActWeb\Pages\UnreadComments.cshtml"
    }

#line default
#line hidden
            BeginContext(526, 63, true);
            WriteLiteral("</div>\n\n<div class=\"comment\">\n    <div class=\"comment--items\">\n");
            EndContext();
#line 20 "D:\Repos\kurs-act-master\KursActWeb\Pages\UnreadComments.cshtml"
         if (Model.Comments.Any())
        {
            

#line default
#line hidden
#line 22 "D:\Repos\kurs-act-master\KursActWeb\Pages\UnreadComments.cshtml"
             foreach (var comment in Model.Comments)
            {

#line default
#line hidden
            BeginContext(701, 56, true);
            WriteLiteral("                <div class=\"comment--item comment--left\"");
            EndContext();
            BeginWriteAttribute("id", " id=\"", 757, "\"", 781, 2);
            WriteAttributeValue("", 762, "comment-", 762, 8, true);
#line 24 "D:\Repos\kurs-act-master\KursActWeb\Pages\UnreadComments.cshtml"
WriteAttributeValue("", 770, comment.Id, 770, 11, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(782, 94, true);
            WriteLiteral(">\n                    <div class=\"comment--avatar avatar-circle\">\n                        <img");
            EndContext();
            BeginWriteAttribute("src", " src=\"", 876, "\"", 1015, 3);
            WriteAttributeValue("", 882, "http://aiiscue.kursufa.ru/account/GetAvatar?hash=", 882, 49, true);
#line 26 "D:\Repos\kurs-act-master\KursActWeb\Pages\UnreadComments.cshtml"
WriteAttributeValue("", 931, comment.UserName.GetHashCode(), 931, 31, false);

#line default
#line hidden
            WriteAttributeValue("", 962, "&size=80&key=2ec8466f0e50235fbb97306dbec850302dfaa6ae", 962, 53, true);
            EndWriteAttribute();
            BeginContext(1016, 102, true);
            WriteLiteral(" alt=\"\" class=\"rounded-circle border border-danger\">\n                    </div>\n                    <a");
            EndContext();
            BeginWriteAttribute("href", " href=\"", 1118, "\"", 1162, 2);
            WriteAttributeValue("", 1125, "/SubstationPage/", 1125, 16, true);
#line 28 "D:\Repos\kurs-act-master\KursActWeb\Pages\UnreadComments.cshtml"
WriteAttributeValue("", 1141, comment.SubstationId, 1141, 21, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(1163, 331, true);
            WriteLiteral(@">
                        <div class=""comment--content shadow-sm"">
                            <div class=""comment--info"">
                                <div class=""d-flex flex-row"">
                                    <h6 class=""comment--user h6 text-black-50"">
                                        <span class=""text-orange"">");
            EndContext();
            BeginContext(1495, 22, false);
#line 33 "D:\Repos\kurs-act-master\KursActWeb\Pages\UnreadComments.cshtml"
                                                             Write(comment.SubstationName);

#line default
#line hidden
            EndContext();
            BeginContext(1517, 3, true);
            WriteLiteral(" / ");
            EndContext();
            BeginContext(1521, 16, false);
#line 33 "D:\Repos\kurs-act-master\KursActWeb\Pages\UnreadComments.cshtml"
                                                                                       Write(comment.UserName);

#line default
#line hidden
            EndContext();
            BeginContext(1537, 135, true);
            WriteLiteral("</span>\n                                    </h6>\n                                    <h6 class=\"ml-auto d-inline-block text-black-50\">");
            EndContext();
            BeginContext(1673, 17, false);
#line 35 "D:\Repos\kurs-act-master\KursActWeb\Pages\UnreadComments.cshtml"
                                                                                Write(comment.TimeStamp);

#line default
#line hidden
            EndContext();
            BeginContext(1690, 251, true);
            WriteLiteral("</h6>\n                                </div>\n                            </div>\n                            <div class=\"d-flex flex-row\">\n                                <div class=\"comment--text text-black-50\">\n                                    <p>");
            EndContext();
            BeginContext(1942, 15, false);
#line 40 "D:\Repos\kurs-act-master\KursActWeb\Pages\UnreadComments.cshtml"
                                  Write(comment.Comment);

#line default
#line hidden
            EndContext();
            BeginContext(1957, 308, true);
            WriteLiteral(@"</p>
                                </div>
                                <div class=""ml-auto d-inline-block align-self-center ml-1 read-comment--button zoom-new"">
                                    <i class=""fas fa-eye fa-2x"" data-toggle=""tooltip"" data-placement=""bottom"" title=""Отметить как прочитанное""");
            EndContext();
            BeginWriteAttribute("onclick", " onclick=\"", 2265, "\"", 2337, 8);
            WriteAttributeValue("", 2275, "MarkAsRead(", 2275, 11, true);
#line 43 "D:\Repos\kurs-act-master\KursActWeb\Pages\UnreadComments.cshtml"
WriteAttributeValue("", 2286, comment.Id, 2286, 11, false);

#line default
#line hidden
            WriteAttributeValue("", 2297, ",", 2297, 1, true);
            WriteAttributeValue(" ", 2298, "\'#comment-", 2299, 11, true);
#line 43 "D:\Repos\kurs-act-master\KursActWeb\Pages\UnreadComments.cshtml"
WriteAttributeValue("", 2309, comment.Id, 2309, 11, false);

#line default
#line hidden
            WriteAttributeValue("", 2320, "\');", 2320, 3, true);
            WriteAttributeValue(" ", 2323, "return", 2324, 7, true);
            WriteAttributeValue(" ", 2330, "false;", 2331, 7, true);
            EndWriteAttribute();
            BeginContext(2338, 160, true);
            WriteLiteral("></i>\n                                </div>\n                            </div>\n\n                        </div>\n                    </a>\n                </div>\n");
            EndContext();
#line 50 "D:\Repos\kurs-act-master\KursActWeb\Pages\UnreadComments.cshtml"
            }

#line default
#line hidden
#line 50 "D:\Repos\kurs-act-master\KursActWeb\Pages\UnreadComments.cshtml"
             

        }
        else
        {

#line default
#line hidden
            BeginContext(2546, 255, true);
            WriteLiteral("            <div class=\"d-flex justify-content-center\">\n                <i class=\"far fa-check-circle fa-10x m-4\"></i>\n            </div>\n            <div class=\"d-flex justify-content-center\">\n                <h3>Нет комментариев</h3>\n            </div>\n");
            EndContext();
#line 61 "D:\Repos\kurs-act-master\KursActWeb\Pages\UnreadComments.cshtml"
        }

#line default
#line hidden
            BeginContext(2811, 1978, true);
            WriteLiteral(@"    </div>
</div>

<script>
    // Mark-as-read individual comment

    function MarkAsRead(id, caller) {

        var xhr = new XMLHttpRequest();
        var body = ""id="" + encodeURIComponent(id);
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 200) {
                $(caller).remove();
            }
        }
        xhr.open(""POST"", '/Comments/MarkCommentAsRead', true);
        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        xhr.send(body);
    }

    // Mark-as-read all comments

    function MarkAsReadAll() {
        Swal.fire({
            title: 'Вы все прочитали?',
            text: ""Отметить все комментарии как прочитанные!"",
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Да, прочитал!',
            cancelButtonText: 'Нет'
        }).then((result) => {
            if (result.value) {");
            WriteLiteral(@"
                var jqxhr = $.get(""/Comments/MarkAllCommentsAsRead/"", function () {
                    ok(""Все комментарии отмечены как прочитанные"");
                    $('.comment--items').empty();
                    $('.comment--items').html(""<div class='d-flex justify-content-center'><i class='far fa-check-circle fa-10x m-4'></i></div><div class='d-flex justify-content-center'><h3>Нет комментариев</h3></div>"")
                    $('#btn_mark_read').fadeOut();
                })
                    .fail(function () {
                        alert(""Что-то пошло не так. Попробуйте еще раз"");
                    })
            }
        })

    }

    function ok(text) {
        const Toast = Swal.mixin({
            toast: true,
            position: 'center',
            showConfirmButton: false,
            timer: 3000
        });

        Toast.fire({
            type: 'success',
            title: text
        })
    }

</script>");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<KursActWeb.Pages.UnreadCommentsModel> Html { get; private set; }
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary<KursActWeb.Pages.UnreadCommentsModel> ViewData => (global::Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary<KursActWeb.Pages.UnreadCommentsModel>)PageContext?.ViewData;
        public KursActWeb.Pages.UnreadCommentsModel Model => ViewData.Model;
    }
}
#pragma warning restore 1591
