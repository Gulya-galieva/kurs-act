function Update_Consumer(n){let i=new FormData(document.forms.consumerForm),t=new XMLHttpRequest;t.onreadystatechange=function(){t.readyState===4&&t.status===200&&Input_IndicateSuccess(n)};t.open("POST","/RegPoint/UpdateConsummer",!0);t.send(i)}function Update_InstallAct(n,t){let r=new FormData(document.forms.installActForm),i=new XMLHttpRequest;i.onreadystatechange=function(){i.readyState===4&&i.status===200&&Input_IndicateSuccess(n,t)};i.open("POST","/RegPoint/UpdateInstallAct",!0);i.send(r)}function Update_RegPointFlags(n){let i=new FormData(document.forms.regPointFlagsForm),t=new XMLHttpRequest;t.onreadystatechange=function(){t.readyState===4&&t.status===200&&n=="ImportConsummerData"&&($("#BtnSendToBashesk").addClass("d-sm-none"),$("#SendToBasheskIndicator").fadeIn(),setTimeout(function(){$("#SendToBasheskIndicator").fadeOut()},5e3))};t.open("POST","/RegPoint/UpdateRegPointFlags",!0);t.send(i)}function Delete(n){Swal.fire({title:"Уверены что хотите удалить точку учета?",text:"Это действие отменить нельзя!",type:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Да, удалить ТУ!"}).then(t=>{t.value&&fetch("/RegPoint/Delete",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id="+encodeURIComponent(n)}).then(n=>n.text()).then(n=>alert(n)).catch(()=>alert("Ошибка"))})}function GetExcelAct(n){fetch("/GetFile/GetExcel_Act",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"Id="+encodeURIComponent(n)}).then(n=>n.text()).then(n=>alert(n)).catch(()=>alert("Ошибка"))}function Input_IndicateSuccess(n,t){n.id=="O_Address_Link"?($("#regPointObjectIndicator").fadeIn(),setTimeout(function(){$("#regPointObjectIndicator").fadeOut()},5e3)):(t?n.classList.add("save-success-btn"):n.classList.add("save-success"),setTimeout(function(){Input_RevertToDefault(n)},5e3))}function Input_RevertToDefault(n){n.classList.remove("save-success");n.classList.remove("save-success-btn")}function Set_KoefficientInputs(){$(".KoefficientInput").val($("#TT_Koefficient").val())}function Get_U_Address(n){$("#O_Index").val($("#U_Index").val());$("#O_Local").val($("#U_Local").val());$("#O_Local_Secondary").val($("#U_Local_Secondary").val());$("#O_Street").val($("#U_Street").val());$("#O_House").val($("#U_House").val());$("#O_Build").val($("#U_Build").val());$("#O_Flat").val($("#U_Flat").val());Update_Consumer(n)}function SetIsComReg(n){$("#IsCommReg").val(n);n?($("#badgeIsCommRegTrue").show(),$("#badgeIsCommRegFalse").hide()):($("#badgeIsCommRegTrue").hide(),$("#badgeIsCommRegFalse").show())}function SetIsOutFlow(n){$("#IsOutFlow").val(n)}function SendToBashEskConfirmation(){Swal.fire({title:"Запросить данные в ЭСКБ?",text:"Отправится запрос на заполнение данных о потребителе",type:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Да, запросить!",cancelButtonText:"Нееет"}).then(n=>{n.value&&($("#ImportConsummerData").val(""),Update_RegPointFlags("ImportConsummerData"))})}$(document).ready(function(){$("#IsCommReg").val()?($("#IsCommRegProxyTrue").addClass("active"),$("#IsCommRegProxyFalse").removeClass("active"),$("#badgeIsCommRegTrue").show(),$("#badgeIsCommRegFalse").hide()):($("#IsCommRegProxyTrue").removeClass("active"),$("#IsCommRegProxyFalse").addClass("active"),$("#badgeIsCommRegTrue").hide(),$("#badgeIsCommRegFalse").show());$("#IsOutFlow").val()?($("#IsOutFlowProxyTrue").addClass("active"),$("#IsOutFlowProxyFalse").removeClass("active")):($("#IsOutFlowProxyTrue").removeClass("active"),$("#IsOutFlowProxyFalse").addClass("active"));$("#TT_Koefficient").val($(".KoefficientInput").val());$("#regPointFlagsFormIndicator").hide();$("#regPointObjectIndicator").hide();$("#SendToBasheskIndicator").hide();$("#ImportConsummerData").val()===""&&$("#BtnSendToBashesk").addClass("d-sm-none")});